<div class='page-container'>
  <div class="game-banner" style="
        background-image: linear-gradient(to bottom, rgb(0, 0, 0), rgba(0, 0, 0, 0)),
        url('<%= cl_image_path @game.photo.key, fetch_format: :auto, crop: :fill %>')"
      >
      <div class='game-title'>
        <h1><%= @game.title %></h1>
      </div>
    </div>
  <div class='game-wrapper'>
      <div class="game-container">
        <div class="game-links">
          <p><%= link_to 'Edit game listing', edit_game_path(@game), class: 'btn btn-primary' if policy(@game).edit?%></p>
          <p><%= link_to 'Delete game listing', game_path(@game), class: 'btn btn-danger',
          data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }if policy(@game).edit?%></p>
          <p><%= link_to 'Back to games', games_path, class: 'btn btn-info' %></p>
        </div>
        <div class="game-information">
          <p><%= @game.description %></p>
          <p><%= @game.price %></p>
          <p><% @game.categories.each do |category| %>
            <%= link_to category.name, category_path(category), class: 'btn btn-light' %>
          <% end %>
          </p>
        </div>
        <div class="game-reviews">
          <%= render 'shared/all_reviews' %>
          <%= link_to "Write a Review", new_game_review_path(@game) if @booked%>
        </div>
      </div>
      <% if user_signed_in? %>
        <div class="booking-wrapper">
          <div class = "booking">
            <div class="booking-form">
            <h1>BOOKINGS</h1>
            <%= render partial: 'bookings/show', locals: { bookings: @bookings, booking: @booking, current_user: @current_user } %>
            </div>
            <div class="booking-details">
              <%= render partial: 'bookings/details', locals: { bookings: @bookings, game: @game, booking: @booking, current_user: @current_user } %>
            </div>
          </div>

          <div class="calendar">
            <%= render partial: 'bookings/calendar', locals: { bookings: @bookings, game: @game, current_user: @current_user} %>
          </div>
        </div>
      <% end %>
  </div>
</div>
